Webhooks
========

Mailtank реализует механизм веб-хуков, позволяющий клиентам узнавать
о событиях, происходящих в системе.

Unsubscribe webhook
-------------------

URL хука указывается менеджером в веб-интерфейсе на странице настроек проекта.

Хук вызывается каждый раз, когда подписчик отписывается от рассылки,
использующей механизм unsubscribe tags.

Вызов хука производится с помощью POST-запроса с JSON-закодированными данными.

Данные содержат следующие поля:

* ``timestamp``: дата и время отписки в формате ISO;
* ``mailing_id``: идентификатор рассылки;
* ``mailing_unsubscribe_tags``: список тегов, указанных в поле ``unsubscribe_tags``
                                рассылки;
* ``subscriber_id``: идентификатор подписчика;
* ``unsubscribe_reason``: причина отписки. Множество возможных значений:
                          ``"unwanted"``, ``"unsolicited"``, ``"inappropriate"``,
                          ``"spam"``, ``"other"``;
* ``unsubscribe_comment`` (опционально): если причина отписки -- ``"other"``, поле содержит
                                         комментарий, введённый подписчиком. В противном
                                         случае поле содержит ``null``.
